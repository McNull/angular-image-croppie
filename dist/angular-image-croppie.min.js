!function(t,e){"use strict";function i(t){var e;if(t)if(t.startsWith("data:"))e=t.substr(0,15).split("/")[1].toLowerCase().replace(";","");else{var i=t.lastIndexOf(".");i!==-1&&i+1<t.length&&(e=t.substr(i+1))}return"jpg"===e&&(e="jpeg"),e||"png"}var r=t.module("angular-image-croppie",[]);r.directive("imageCroppie",["$q",function(t){return{restrict:"EA",scope:{src:"=",cropWidth:"=?",cropHeight:"=?",cropper:"="},link:function(r,n,a){n.addClass("image-croppie");var o=n[0],h=o.getBoundingClientRect(),c={width:h.width,height:h.height-33},d={width:r.cropWidth,height:r.cropHeight};!function(){if(d.width>c.width){var t=c.width/d.width;d.height*=t,d.width*=t}if(d.height>c.height){var t=c.height/d.height;d.height*=t,d.width*=t}}();var p={boundary:c,viewport:d},s=new e(o,p);r.cropper={result:function(){return t(function(t,e){r.src?s.result({type:"base64",size:{width:r.width,height:r.height},format:i(r.src)}).then(function(e){t(e)}):e("No image data")})}},r.$watch("src",function(t){t&&s.bind(t).then(function(){s.setZoom(0)})})}}}]),r.directive("onFileRead",function(){return{restrict:"A",scope:{onFileRead:"&"},link:function(t,e){if("INPUT"!==e.prop("tagName")||"file"!==e.attr("type"))throw new Error('read-file attribute should be place on a <input type="file"/> element.');e.bind("change",function(e){if(e.target.files&&e.target.files[0]){var i=new FileReader;i.onload=function(e){t.$apply(function(){t.onFileRead({data:e.target.result})})},i.readAsDataURL(e.target.files[0])}})}}})}(angular,Croppie);