!function(t,e){"use strict";function i(t){var e;if(t)if(t.startsWith("data:"))e=t.substr(0,15).split("/")[1].toLowerCase().replace(";","");else{var i=t.lastIndexOf(".");i!==-1&&i+1<t.length&&(e=t.substr(i+1))}return"jpg"===e&&(e="jpeg"),e||"png"}var r=t.module("angular-image-croppie",[]);r.directive("imageCroppie",["$q","$timeout",function(t,r){return{restrict:"EA",scope:{src:"=",cropWidth:"=?",cropHeight:"=?",cropper:"="},link:function(n,a,o){a.addClass("image-croppie"),r(function(){var r=a[0],o=r.getBoundingClientRect(),h={width:o.width,height:o.height-33},c={width:n.cropWidth,height:n.cropHeight};!function(){if(c.width>h.width){var t=h.width/c.width;c.height*=t,c.width*=t}if(c.height>h.height){var t=h.height/c.height;c.height*=t,c.width*=t}}();var u={boundary:h,viewport:c},d=new e(r,u);n.cropper={result:function(){return t(function(t,e){n.src?d.result({type:"base64",size:{width:n.width,height:n.height},format:i(n.src)}).then(function(e){t(e)}):e("No image data")})}},n.$watch("src",function(t){t&&d.bind(t).then(function(){d.setZoom(0)})})})}}}]),r.directive("onFileRead",function(){return{restrict:"A",scope:{onFileRead:"&"},link:function(t,e){if("INPUT"!==e.prop("tagName")||"file"!==e.attr("type"))throw new Error('read-file attribute should be place on a <input type="file"/> element.');e.bind("change",function(e){if(e.target.files&&e.target.files[0]){var i=new FileReader;i.onload=function(e){t.$apply(function(){t.onFileRead({data:e.target.result})})},i.readAsDataURL(e.target.files[0])}})}}})}(angular,Croppie);